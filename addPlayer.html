<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inserimento Giocatore</title>
    
</head>
<body>
    <h1>Inserimento Giocatore</h1>
    <form id="giocatore-form">
        <label for="id">ID:</label>
        <input type="number" id="id" name="id" required><br><br>

        <label for="nome_personaggio">Nome Personaggio:</label>
        <input type="text" id="nome_personaggio" name="nome_personaggio" required><br><br>

        <label for="classe">Classe:</label>
        <input type="text" id="classe" name="classe" required><br><br>

        <label for="livello">Livello:</label>
        <input type="number" id="livello" name="livello" required><br><br>

        <label for="razza">Razza:</label>
        <input type="text" id="razza" name="razza" required><br><br>

        <label for="allineamento">Allineamento:</label>
        <input type="text" id="allineamento" name="allineamento" required><br><br>

        <label for="esperienza">Esperienza:</label>
        <input type="text" id="esperienza" name="esperienza" required><br><br>

        <label for="tratti_caratteriali">Tratti Caratteriali:</label>
        <input type="text" id="tratti_caratteriali" name="tratti_caratteriali" required><br><br>

        <label for="percezione_passiva">Percezione Passiva:</label>
        <input type="number" id="percezione_passiva" name="percezione_passiva" required><br><br>

        <label for="ideali">Ideali:</label>
        <input type="text" id="ideali" name="ideali" required><br><br>

        <label for="legami">Legami:</label>
        <input type="text" id="legami" name="legami" required><br><br>

        <label for="difetti">Difetti:</label>
        <input type="text" id="difetti" name="difetti" required><br><br>

        <label for="ispirazione">Ispirazione:</label>
        <input type="text" id="ispirazione" name="ispirazione" required><br><br>

        <label for="bonus_competenza">Bonus Competenza:</label>
        <input type="number" id="bonus_competenza" name="bonus_competenza" required><br><br>

        <label for="iniziativa">Iniziativa:</label>
        <input type="number" id="iniziativa" name="iniziativa" required><br><br>

        <label for="classe_armatura">Classe Armatura:</label>
        <input type="number" id="classe_armatura" name="classe_armatura" required><br><br>

        <label for="max_punti_ferita">Punti Ferita Massimi:</label>
        <input type="number" id="max_punti_ferita" name="max_punti_ferita" required><br><br>

        <label for="curr_punti_ferita">Punti Ferita:</label>
        <input type="number" id="curr_punti_ferita" name="curr_punti_ferita" required><br><br>

        <label for="temp_punti_ferita">Punti Ferita Temporanei:</label>
        <input type="number" id="temp_punti_ferita" name="temp_punti_ferita" required><br><br>

        <label for="dadi_vita">Dadi Vita:</label>
        <input type="number" id="dadi_vita" name="dadi_vita" required><br><br>


        <button type="submit">Inserisci Giocatore</button>

    </form>

    <!-- Includi Firebase SDK versione 8.x.x -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>

    <script>
        // Inizializza Firebase con la tua configurazione
        const firebaseConfig = {
            apiKey: "AIzaSyCEc_jt85Nr4KS-4wXSPfAscmc0Vt0o4BM",
            authDomain: "arcanetomestavern.firebaseapp.com",
            projectId: "arcanetomestavern",
            storageBucket: "arcanetomestavern.appspot.com",
            messagingSenderId: "1035963633765",
            appId: "1:1035963633765:web:7c1524769bc1e387ba768c",
            measurementId: "G-Q2BES5BYC2"
        };

        // Inizializza l'app Firebase
        firebase.initializeApp(firebaseConfig);

        const db = firebase.firestore();

        const idPlayerInput = document.getElementById("id");
        const form = document.getElementById("giocatore-form");

        // Riferimento alla collezione "ArcaneTomesTavern/campagne"
        const giocatoriRef = db.collection("ArcaneTomesTavernDB").doc("giocatori");

        
        form.addEventListener("submit", function (e) {
            e.preventDefault();
            
            const idPlayer = parseInt(idPlayerInput.value);
            const nome_personaggio = document.getElementById("nome_personaggio").value;
            const classe = document.getElementById("classe").value;
            const livello = parseFloat(document.getElementById("livello").value);
            const razza = document.getElementById("razza").value;
            const allineamento = document.getElementById("allineamento").value;
            const esperienza = document.getElementById("esperienza").value;
            const tratti_caratteriali = document.getElementById("tratti_caratteriali").value;
            const percezione_passiva = parseInt(document.getElementById("percezione_passiva").value);
            const ideali = document.getElementById("ideali").value;
            const legami = document.getElementById("legami").value;
            const difetti = document.getElementById("difetti").value;
            const ispirazione = document.getElementById("ispirazione").value;
            const bonus_competenza = parseInt(document.getElementById("bonus_competenza").value);
            const iniziativa = parseInt(document.getElementById("iniziativa").value);
            const classe_armatura = parseInt(document.getElementById("classe_armatura").value);
            const max_punti_ferita = parseInt(document.getElementById("max_punti_ferita").value);
            const curr_punti_ferita = parseInt(document.getElementById("curr_punti_ferita").value);
            const temp_punti_ferita = parseInt(document.getElementById("temp_punti_ferita").value);
            const dadi_vita = parseInt(document.getElementById("dadi_vita").value);
            //const database = firebase.database();
            //const giocatoriRef = database.ref("giocatori");

            // Inserisci i dati nel database
            giocatoriRef.update({
                [idPlayer] : {
                    id_player : idPlayer,
                    nome_personaggio: nome_personaggio,
                    classe: classe,
                    livello: livello,
                    razza: razza,
                    allineamento: allineamento,
                    esperienza: esperienza,
                    tratti_caratteriali: tratti_caratteriali,
                    percezione_passiva: percezione_passiva,
                    ideali: ideali,
                    legami: legami,
                    difetti: difetti,
                    ispirazione: ispirazione,
                    bonus_competenza: bonus_competenza,
                    iniziativa: iniziativa,
                    classe_armatura: classe_armatura,
                    max_punti_ferita: max_punti_ferita,
                    curr_punti_ferita: curr_punti_ferita,
                    temp_punti_ferita: temp_punti_ferita,
                    dadi_vita: dadi_vita
                }
            }).then(() => {
                alert("Giocatore inserito con successo!");
                form.reset();
            }).catch(error => {
                alert("Si Ã¨ verificato un errore durante l'inserimento del giocatore: " + error.message);
            });
        });
    </script>
</body>
</html>
