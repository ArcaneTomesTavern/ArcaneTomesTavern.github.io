<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inserimento Giocatore</title>
    
</head>
<body>
    <h1>Inserimento Giocatore</h1>
    <form id="giocatore-form">
        <label for="id">ID:</label>
        <input type="number" id="id" name="id" required><br><br>

        <label for="nome_personaggio">Nome Personaggio:</label>
        <input type="text" id="nome_personaggio" name="nome_personaggio" required><br><br>

        <label for="classe">Classe:</label>
        <input type="text" id="classe" name="classe" required><br><br>

        <label for="livello">Livello:</label>
        <input type="number" id="livello" name="livello" required><br><br>

        <label for="razza">Razza:</label>
        <input type="text" id="razza" name="razza" required><br><br>

        <button type="submit">Inserisci Giocatore</button>

    </form>

    <!-- Includi Firebase SDK versione 8.x.x -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>

    <script>
        // Inizializza Firebase con la tua configurazione
        const firebaseConfig = {
            apiKey: "AIzaSyCEc_jt85Nr4KS-4wXSPfAscmc0Vt0o4BM",
            authDomain: "arcanetomestavern.firebaseapp.com",
            projectId: "arcanetomestavern",
            storageBucket: "arcanetomestavern.appspot.com",
            messagingSenderId: "1035963633765",
            appId: "1:1035963633765:web:7c1524769bc1e387ba768c",
            measurementId: "G-Q2BES5BYC2"
        };

        // Inizializza l'app Firebase
        firebase.initializeApp(firebaseConfig);

        const db = firebase.firestore();

        const idPlayerInput = document.getElementById("id");
        const form = document.getElementById("giocatore-form");

        // Riferimento alla collezione "ArcaneTomesTavern/campagne"
        const giocatoriRef = db.collection("ArcaneTomesTavernDB").doc("giocatori");

        
        form.addEventListener("submit", function (e) {
            e.preventDefault();
            
            const idPlayer = parseInt(idPlayerInput.value);
            const nome_personaggio = document.getElementById("nome_personaggio").value;
            const classe = parseFloat(document.getElementById("classe").value);
            const livello = parseFloat(document.getElementById("livello").value);
            const razza = parseInt(document.getElementById("razza").value);

            //const database = firebase.database();
            //const giocatoriRef = database.ref("giocatori");

            // Inserisci i dati nel database
            giocatoriRef.update({
                [idPlayer] : {
                    id_player : idPlayer,
                    nome_personaggio: nome_personaggio,
                    classe: classe,
                    livello: livello,
                    razza: razza
                }
            }).then(() => {
                alert("Giocatore inserito con successo!");
                form.reset();
            }).catch(error => {
                alert("Si Ã¨ verificato un errore durante l'inserimento del giocatore: " + error.message);
            });
        });
    </script>
</body>
</html>
